<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Методичка arr</title>
    <link rel="stylesheet" href="../../css/index.css">
    <link rel="stylesheet" href="../../libs/highlight/styles/atom-one-dark-reasonable.css">
    
</head>
<body>
    
    <div class="wrapper">
        <a name="menu"></a>
        
        <ul>
            <li><a href="#Map">Map</a></li>
            <li><a href="#Set">Set</a></li>
            <li><a href="#Weak">WeakMap WeakSet</a></li>
        </ul>
        
        <h2>Map Set WeakMap WeakSet</h2>
        <a name="Map"></a>
    <pre>
        <code class="">
          
    Map – это коллекция ключ/значение, как и Object. Но основное отличие в том,
        что Map позволяет использовать ключи любого типа.

    Методы и свойства:
    
    new Map() – создаёт коллекцию.
    map.set(key, value) – записывает по ключу key значение value.
    map.get(key) – возвращает значение по ключу или undefined, если ключ key отсутствует.
    map.has(key) – возвращает true, если ключ key присутствует в коллекции, иначе false.
    map.delete(key) – удаляет элемент по ключу key.
    map.clear() – очищает коллекцию от всех элементов.
    map.size – возвращает текущее количество элементов.

    ********************************* Перебор Map ***************************************

    map.keys() – возвращает итерируемый объект по ключам,
    map.values() – возвращает итерируемый объект по значениям,
    map.entries() – возвращает итерируемый объект по парам вида [ключ, значение], 
    этот вариант используется по умолчанию в for..of.
    let recipeMap = new Map([
        ["огурец", 500],
        ["помидор", 350],
        ["лук",    50]
        ]);

        // перебор по ключам (овощи)
        for (let vegetable of recipeMap.keys()) {
        alert(vegetable); // огурец, помидор, лук
        }

    в Map перебор происходит в том же порядке, в каком происходило добавление элементов.

    Map имеет встроенный метод forEach
    recipeMap.forEach((value, key, map) => {
        alert(`${key}: ${value}`); // огурец: 500 и так далее
    });

    ***************************************** map из object ****************************************
    let map = new Map(Object.entries(obj));
    Здесь Object.entries возвращает массив пар ключ-значение: [ ["name","John"], ["age", 30] ].

    ******************************************* object из map ************************************
    let obj = Object.fromEntries(map.entries()); // make a plain object (*)
    let obj = Object.fromEntries(map); // убрать .entries() покороче  
        </code>
    </pre>
    <a href="#menu">menu</a>
    <a name="Set"></a>
    <h2>Set</h2>
    <pre>
        <code>
    Объект Set – это особый вид коллекции: «множество» значений (без ключей), где каждое значение может появляться только один раз.

    new Set(iterable) – создаёт Set, и если в качестве аргумента был предоставлен итерируемый объект (обычно это массив), 
    то копирует его значения в новый Set.
    set.add(value) – добавляет значение (если оно уже есть, то ничего не делает), возвращает тот же объект set.
    set.delete(value) – удаляет значение, возвращает true если value было в множестве на момент вызова, иначе false.
    set.has(value) – возвращает true, если значение присутствует в множестве, иначе false.
    set.clear() – удаляет все имеющиеся значения.
    set.size – возвращает количество элементов в множестве.

    ******************************************** Перебор объекта Set **************************************
    set.forEach((value, valueAgain, set) => { });  //    valueAgain, для совместимости с Map 

    set.keys() – возвращает перебираемый объект для значений,
    set.values() – то же самое, что и set.keys(), присутствует для обратной совместимости с Map,
    set.entries() – возвращает перебираемый объект для пар вида [значение, значение], присутствует для обратной совместимости с Map.
        </code>
    </pre>
    <a href="#menu">menu</a>
    <a name="Weak"></a>
    <h2>WeakMap WeakSet</h2>
    <pre>
        <code>
    WeakMap – это Map-подобная коллекция, позволяющая использовать в качестве ключей только объекты,
    и автоматически удаляющая их вместе с соответствующими значениями, как только они становятся недостижимыми иными путями.

    WeakMap присутствуют только следующие методы:
    weakMap.get(key)
    weakMap.set(key, value)
    weakMap.delete(key)
    weakMap.has(key)

    WeakSet – это Set-подобная коллекция, которая хранит только объекты и удаляет их,
     как только они становятся недостижимыми иными путями.
    Она аналогична Set, но мы можем добавлять в WeakSet только объекты (не примитивные значения).
    Объект присутствует в множестве только до тех пор, пока доступен где-то ещё.
    Как и Set, она поддерживает add, has и delete, но не size, keys() и не является перебираемой.
        </code>
    </pre>
</div>

    <script src="../../libs/highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</body>
</html>